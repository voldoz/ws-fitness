<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WS Fitness</title>
<style>
  body { background-color: #121212; color: #eee; font-family: Arial, sans-serif; margin:0; padding:20px; }
  h1 { text-align:center; color:#0af; }
  label { display:block; margin-top:10px; }
  input, select { width:100%; padding:8px; margin-top:5px; border:none; border-radius:5px; }
  button { margin-top:15px; padding:10px; width:100%; border:none; border-radius:5px; background-color:#0af; color:#121212; font-weight:bold; cursor:pointer; }
  .results { margin-top:20px; background:#1e1e1e; padding:15px; border-radius:10px; white-space: pre-line; }
  .lang-btn { position:absolute; top:20px; right:20px; padding:5px 10px; cursor:pointer; background:#0af; color:#121212; border:none; border-radius:5px; }
</style>
</head>
<body>

<button class="lang-btn" onclick="toggleLang()">EN / AR</button>

<h1 id="title">WS Fitness</h1>

<div>
  <label id="weightLabel">الوزن (كجم)</label>
  <input type="number" id="weight" placeholder="105">

  <label id="heightLabel">الطول (سم)</label>
  <input type="number" id="height" placeholder="185">

  <label id="ageLabel">العمر</label>
  <input type="number" id="age" placeholder="37">

  <label id="genderLabel">الجنس</label>
  <select id="gender">
    <option value="male">ذكر</option>
    <option value="female">أنثى</option>
  </select>

  <label id="activityDaysLabel">عدد أيام النشاط</label>
  <select id="activityDays">
    <option value="1">1 يوم</option>
    <option value="2">2 أيام</option>
    <option value="3" selected>3 أيام</option>
    <option value="4">4 أيام</option>
    <option value="5">5 أيام</option>
    <option value="6">6 أيام</option>
  </select>

  <label id="goalLabel">الهدف</label>
  <select id="goal">
    <option value="cut">تنشيف</option>
    <option value="maintain">تثبيت</option>
    <option value="bulk">تضخيم</option>
  </select>

  <label id="proteinFactorLabel">ضرب البروتين بكمية معينة (حسب وزن الجسم)</label>
  <input type="number" id="proteinFactor" placeholder="2" step="0.1">

  <label id="mealsLabel">عدد الوجبات</label>
  <select id="meals">
    <option value="2">2 وجبات</option>
    <option value="3">3 وجبات</option>
    <option value="4">4 وجبات</option>
    <option value="5">5 وجبات</option>
    <option value="6" selected>6 وجبات</option>
  </select>

  <label id="weeklyGoalLabel">الهدف الأسبوعي بالكيلوغرام (0.5 – 2)</label>
  <input type="number" id="weeklyGoal" placeholder="0.5" step="0.1" min="0.5" max="2">

  <button onclick="calculate()">احسب / Calculate</button>

  <div class="results" id="results" style="display:none;">
    <p id="caloriesResult"></p>
    <p id="proteinResult"></p>
    <p id="carbResult"></p>
    <p id="fatResult"></p>
    <p id="perMealResult"></p>
    <label id="adjustCaloriesLabel">تعديل السعرات (تخصم/تضاف للكارب فقط)</label>
    <input type="number" id="adjustCalories" placeholder="0" step="10" oninput="adjustCarbs()">
    <p id="weeklyCaloriesResult"></p>
    <p id="stepsResult"></p>
  </div>
</div>

<script>
let lang = 'ar';
let protein = 0, fat = 0, carbs = 0, tdee = 0, meals = 3, weight = 105;

function toggleLang() {
  lang = lang === 'ar' ? 'en' : 'ar';
  document.getElementById('title').innerText = 'WS Fitness';
  document.getElementById('weightLabel').innerText = lang==='ar' ? 'الوزن (كجم)' : 'Weight (kg)';
  document.getElementById('heightLabel').innerText = lang==='ar' ? 'الطول (سم)' : 'Height (cm)';
  document.getElementById('ageLabel').innerText = lang==='ar' ? 'العمر' : 'Age';
  document.getElementById('genderLabel').innerText = lang==='ar' ? 'الجنس' : 'Gender';
  document.getElementById('activityDaysLabel').innerText = lang==='ar' ? 'عدد أيام النشاط' : 'Activity Days';
  document.getElementById('goalLabel').innerText = lang==='ar' ? 'الهدف' : 'Goal';
  document.getElementById('proteinFactorLabel').innerText = lang==='ar' ? 'ضرب البروتين بكمية معينة (حسب وزن الجسم)' : 'Protein multiplier';
  document.getElementById('mealsLabel').innerText = lang==='ar' ? 'عدد الوجبات' : 'Number of Meals';
  document.getElementById('weeklyGoalLabel').innerText = lang==='ar' ? 'الهدف الأسبوعي بالكيلوغرام (0.5 – 2)' : 'Weekly goal (kg, 0.5-2)';
  document.getElementById('adjustCaloriesLabel').innerText = lang==='ar' ? 'تعديل السعرات (تخصم/تضاف للكارب فقط)' : 'Adjust Calories (affects carbs only)';
}

function calculate() {
  weight = parseFloat(document.getElementById('weight').value);
  const height = parseFloat(document.getElementById('height').value);
  const age = parseFloat(document.getElementById('age').value);
  const gender = document.getElementById('gender').value;
  const activityDays = parseInt(document.getElementById('activityDays').value);
  const goal = document.getElementById('goal').value;
  const proteinFactor = parseFloat(document.getElementById('proteinFactor').value) || 2;
  meals = parseInt(document.getElementById('meals').value);
  const weeklyGoal = parseFloat(document.getElementById('weeklyGoal').value) || 0;

  if (!weight || !height || !age) return alert(lang==='ar' ? 'أدخل جميع القيم' : 'Enter all values');

  let bmr = gender==='male' ? 10*weight + 6.25*height - 5*age +5 : 10*weight + 6.25*height - 5*age -161;
  let activityMult = 1.2 + (activityDays-1)*0.1;
  if(activityMult>1.9) activityMult = 1.9;
  tdee = bmr * activityMult;

  if(goal==='cut') tdee -= 500;
  if(goal==='bulk') tdee += 500;

  protein = weight * proteinFactor;
  fat = weight * 0.8;
  carbs = (tdee - (protein*4 + fat*9))/4;

  // حساب السعرات المطلوب حرقها والأهداف الأسبوعية
  const weeklyCalories = weeklyGoal * 7700; // 1 كجم دهون ≈ 7700 كالوري
  const caloriesPerStep = 0.04 * weight; 
  const stepsRequired = weeklyCalories / caloriesPerStep;

  updateResults(weeklyCalories, stepsRequired);
  document.getElementById('results').style.display='block';
  document.getElementById('adjustCalories').value = 0;
}

function updateResults(weeklyCalories = 0, stepsRequired = 0) {
  const proteinPerMeal = protein / meals;
  const carbsPerMeal = carbs / meals;
  const fatPerMeal = fat / meals;

  const proteinFood = proteinPerMeal * 4; 
  const carbsFood = carbsPerMeal * 3.5; 
  const fatFood = fatPerMeal * 1; 

  document.getElementById('caloriesResult').innerText = lang==='ar' ? `السعرات اليومية: ${Math.round(tdee)} كالوري` : `Calories: ${Math.round(tdee)} kcal`;
  document.getElementById('proteinResult').innerText = lang==='ar' ? `البروتين: ${Math.round(protein)} جم` : `Protein: ${Math.round(protein)} g`;
  document.getElementById('carbResult').innerText = lang==='ar' ? `الكارب: ${Math.round(carbs)} جم` : `Carbs: ${Math.round(carbs)} g`;
  document.getElementById('fatResult').innerText = lang==='ar' ? `الدهون: ${Math.round(fat)} جم` : `Fat: ${Math.round(fat)} g`;
  document.getElementById('perMealResult').innerText = lang==='ar' ? 
    `لكل وجبة (${meals} وجبات):\nبروتين ${Math.round(proteinPerMeal)} جم (~${Math.round(proteinFood)} جم صدور دجاج)\nكارب ${Math.round(carbsPerMeal)} جم (~${Math.round(carbsFood)} جم أرز)\nدهون ${Math.round(fatPerMeal)} جم (~${Math.round(fatFood)} جم زيت)` :
    `Per meal (${meals} meals):\nProtein ${Math.round(proteinPerMeal)} g (~${Math.round(proteinFood)} g chicken)\nCarbs ${Math.round(carbsPerMeal)} g (~${Math.round(carbsFood)} g rice)\nFat ${Math.round(fatPerMeal)} g (~${Math.round(fatFood)} g oil)`;

  document.getElementById('weeklyCaloriesResult').innerText = lang==='ar' ? `السعرات المطلوب حرقها لتحقيق الهدف الأسبوعي: ${Math.round(weeklyCalories)} كالوري` : `Calories to burn for weekly goal: ${Math.round(weeklyCalories)} kcal`;
  document.getElementById('stepsResult').innerText = lang==='ar' ? `عدد الخطوات المطلوبة: ${Math.round(stepsRequired)} خطوة` : `Steps required: ${Math.round(stepsRequired)}`;
}

function adjustCarbs() {
  const adjust = parseFloat(document.getElementById('adjustCalories').value) || 0;
  const carbsCalories = protein*4 + fat*9;
  const newCarbsCalories = tdee + adjust - carbsCalories;
  carbs = newCarbsCalories /4;
  updateResults();
}
</script>

</body>
</html>
